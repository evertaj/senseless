$(document).ready () ->
  $('.likes_counter').click ->
    like = $(@).find('.likes_val')
    id = like.data('id')
    img = $(@).find('.like_img')
    $.ajax
      type: "GET",
      url: '/posts/'+id+'/like',
      dataType: 'json'
      error: (jqXHR, textStatus, errorThrown) ->
        alert "AJAX Error: #{textStatus}"
      success: (data, textStatus, jqXHR) ->
        if img.hasClass("jopa")
          img.removeClass("jopa")
        else
          img.addClass("jopa")
        like.text("#{data.likes_count}")